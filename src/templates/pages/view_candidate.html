{% extends "common/base.html" %}

{% block title %}view candidate{% endblock %}

{% block content %}
    <div class="relative w-full h-64 bg-white rounded-lg primary-gradient"></div>
        <div class="-mt-24 mr-8 flex justify-end">
            <div class="relative w-48 h-48 rounded-full bg-white border-4 border-[#000019] overflow-hidden group">
                {% load static %}
                {% if user and user.avatar %}
                    <img src="{{user.avatar}}" width="100%" height="100%" />
                {% else %}
                    <img src="{% static 'assets/user_avatar.jpg' %}" width="100%" height="100%" />
                {% endif %}
            </div>
        </div>
    
    <div class="w-4/5">
            <h1 class="text-3xl pt-5 mb-10">Overview of your application</h1>
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-[#CDACFF] bg-opacity-10 rounded-lg p-6">
                    <h3 class="text-xl text-[#9E6DE9]">Your contact details</h3>
                    <p class="mt-4"><b>Full name:</b> {{ user.full_name }}</p>
                    <p class="mt-1"><b>Email:</b> {{ user.email }}</p>
                    <p class="mt-1"><b>Phone:</b> {{ user.phone }}</p>
                    <p class="mt-1"><b>Address:</b> {{ user.full_address }}</p>
                </div>
            </div>
            <div class="grid grid-cols-3 gap-4 mt-5">
                {% if not user.experiences %}
                    <div class="bg-[#CDACFF] bg-opacity-10 rounded-lg p-6">
                        <h3 class="text-xl text-[#9E6DE9]">Experience</h3>
                       <p class="mt-4">No experiences.</p>
                    </div>
                {% endif %}
                {% for e in user.experiences %}
                    <div class="bg-[#CDACFF] bg-opacity-10 rounded-lg p-6">
                        <h3 class="text-xl text-[#9E6DE9]">Experience</h3>
                        <p class="mt-4"><b>Place of work:</b> {{ e.company }}</p>
                        <p class="mt-1"><b>Role:</b> {{ e.role }}</p>
                        <p class="mt-1"><b>Start date:</b> {{ e.start_date }}</p>
                        <p class="mt-1"><b>End date:</b> {% if e.end_date %}{{ e.end_date }}{% else %}Still work here{% endif %}</p>
                    </div>
                {% endfor %}
            
            </div>
            <div class="grid grid-cols-3 gap-4 mt-5">
                {% if not user.experiences %}
                    <div class="bg-[#CDACFF] bg-opacity-10 rounded-lg p-6">
                        <h3 class="text-xl text-[#9E6DE9]">Recommendation</h3>
                        <p class="mt-4">Not recommendations.</p>
                    </div>
                {% endif %}
                {% for r in user.recommendations %}
                    <div class="bg-[#CDACFF] bg-opacity-10 rounded-lg p-6">
                        <h3 class="text-xl text-[#9E6DE9]">Recommendation</h3>
                        <p class="mt-4"><b>Full name:</b> {{ r.name }}</p>
                        <p class="mt-1"><b>Email:</b> {{ r.email }}</p>
                        <p class="mt-1"><b>Phone number:</b> {{ r.phone }}</p>
                        <p class="mt-1"><b>Company:</b> {{ r.company }}</p>
                        <p class="mt-1"><b>Role:</b> {{ r.position }}</p>
                    </div>
                {% endfor %}
            
            </div>
            <form method="POST">
                {% csrf_token %}
                <input hidden="hidden" name="key" value="{{ user.id }}" />
                <div class="grid grid-cols-1 gap-4 mt-5">
                    <div class="bg-[#CDACFF] bg-opacity-10 rounded-lg p-6">
                        <h3 class="text-xl text-[#9E6DE9]">Cover letter</h3>
                        <textarea name="cover_letter" rows="6" placeholder="Write your cover letter here..." required class="mt-4 px-4 py-3 rounded-lg bg-[#6C37BD] w-full">{{ job.cover_letter }}</textarea>
                    </div>
                </div>
                <div class="mt-10 flex justify-center">
                    <button type="submit" class="bg-[#FFAA76] hover:bg-opacity-90 rounded-full py-2 px-6 text-white text-xl duration-300">Apply for a job</button>
                </div>
            </form>
            </div>
        </div>
    
    

{% endblock %}
